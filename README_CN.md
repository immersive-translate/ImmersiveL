# ImmersiveL

ImmersiveL æ˜¯ä¸€ä¸ªè¿æ¥å…¨çƒå„ç§è¯­è¨€çš„æ¡†æ¶å’Œæ¨¡å‹ä¸­å¿ƒï¼Œå®ƒæ˜¯å¼€æ”¾ä¸”è‡ªç”±çš„ã€‚

ç°åœ¨ï¼ŒImmersiveL åº”ç”¨ç¨‹åºæ˜¯åŸºäº Deepspeed çš„ä¸­è‹±åŒå‘ç¿»è¯‘æ¡†æ¶ã€‚ä¸»è¦ç»“æ„ä½äº `app` ç›®å½•ä¸­ï¼Œç”± Python 3.8+ ç¯å¢ƒã€Flaskã€Deepspeed å’Œ PyTorch ç»„æˆã€‚

**ç›®å‰çš„ç¬¬ä¸€ä¸ªæ¨¡å‹æ˜¯åŸºäº bloomz æ¨¡å‹è¿›è¡Œè®­ç»ƒçš„ï¼Œå…¶è®¸å¯è¯å¯ä»¥åœ¨[æ­¤å¤„](https://bigscience.huggingface.co/blog/the-bigscience-rail-license)æ‰¾åˆ°ã€‚Apache è®¸å¯è¯é€‚ç”¨äºæ­¤æ¨¡å‹çš„æ´¾ç”Ÿéƒ¨åˆ†å’Œæ­¤ä»“åº“ä¸­çš„å…¶ä»–æºä»£ç æ–‡ä»¶ã€‚**

ğŸŒ **[ä¸­æ–‡é˜…è¯»](README_CN.md)**

## å¼€å§‹ä½¿ç”¨

1. **å…‹éš†ä»“åº“å¹¶è®¾ç½®ç¯å¢ƒ**

   é¦–å…ˆï¼Œå°† ImmersiveL ä»“åº“å…‹éš†åˆ°æ‚¨çš„æœ¬åœ°è®¡ç®—æœºï¼š

   ```bash
   git clone https://github.com/immersive-translate/ImmersiveL.git
   ```

   å…‹éš†åï¼Œå¯¼èˆªåˆ° `app` ç›®å½•ï¼Œå¹¶å®‰è£… `requirements.txt` ä¸­åˆ—å‡ºçš„æ‰€æœ‰å¿…è¦çš„åŒ…ï¼š

   ```bash
   cd ImmersiveL/app
   pip install -r requirements.txt
   ```

2. **è¿è¡Œåº”ç”¨ç¨‹åº**

   ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä½¿ç”¨ Deepspeed å¯åŠ¨åº”ç”¨ç¨‹åºï¼š

   ```bash
   deepspeed --num_gpus 1 app.py
   ```

   å½“æ‚¨çœ‹åˆ°ç±»ä¼¼ `* Running on [IP åœ°å€]` çš„æ¶ˆæ¯ï¼Œå°±è¡¨ç¤ºåº”ç”¨ç¨‹åºå·²æˆåŠŸå¯åŠ¨ã€‚

## ä½¿ç”¨ ImmersiveL

åº”ç”¨ç¨‹åºå¯åŠ¨å¹¶è¿è¡Œåï¼Œæ‚¨å¯ä»¥è½»æ¾ä½¿ç”¨æä¾›çš„ç¿»è¯‘ç«¯ç‚¹ã€‚

### ç¤ºä¾‹ 1ï¼šä»ä¸­æ–‡ç¿»è¯‘æˆè‹±æ–‡

```bash
curl -X POST -H "Content-Type: application/json" -d '{"text": "æ¬§æ´²ç»æµå¢é•¿ä»é¢ä¸´è¾ƒå¤§æŒ‘æˆ˜", "task": "zh2en"}' http://localhost:7000/translate
```

### ç¤ºä¾‹ 2ï¼šä»è‹±æ–‡ç¿»è¯‘æˆä¸­æ–‡

```bash
curl -X POST -H "Content-Type: application/json" -d '{"text": "Want to live longer? Play with your grandkids. Itâ€™s good for them, too.", "task": "en2zh"}' http://localhost:7000/translate
```

## API ç¤ºä¾‹

### è¯·æ±‚

```json
{
  "text": "æ¬§æ´²ç»æµå¢é•¿ä»é¢ä¸´è¾ƒå¤§æŒ‘æˆ˜",
  "task": "zh2en"  // ä½¿ç”¨ "zh2en" è¿›è¡Œä¸­æ–‡åˆ°è‹±æ–‡çš„ç¿»è¯‘ï¼Œä½¿ç”¨ "en2zh" è¿›è¡Œè‹±æ–‡åˆ°ä¸­æ–‡çš„ç¿»è¯‘ã€‚
}
```

### å“åº”

å¯¹äºç»™å®šçš„è¯·æ±‚ï¼š

```json
{
  "data": {
    "translation": "æ¬§æ´²çš„ç»æµå¢é•¿ç»§ç»­é¢ä¸´é‡å¤§æŒ‘æˆ˜",
    "info": {}
  }
}
```

### å‚æ•°æè¿°

#### è¯·æ±‚å‚æ•°

- `text`: æ‚¨å¸Œæœ›ç¿»è¯‘çš„æ–‡æœ¬ã€‚
- `task`: å®šä¹‰ç¿»è¯‘æ–¹å‘ã€‚ä½¿ç”¨ "zh2en" è¿›è¡Œä¸­æ–‡åˆ°è‹±æ–‡çš„ç¿»è¯‘ï¼Œä½¿ç”¨ "en2zh" è¿›è¡Œè‹±æ–‡åˆ°ä¸­æ–‡çš„ç¿»è¯‘ã€‚

#### å“åº”å‚æ•°

- `data`:
  - `translation`: ç¿»è¯‘åçš„è¾“å‡ºæ–‡æœ¬ã€‚
  - `info`: å…³äºè¯·æ±‚çš„å…¶ä»–è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½¿ç”¨çš„æ¨¡å‹ã€åŸå§‹æ–‡æœ¬ç­‰ã€‚
